extends templates/layout

block page_content

        h2.page-header PUBLICATIONS

        div.container
            div.row.justify-content-center
                div#pubs.col-md-8

block page_scripts
    script.
        let xhr = new XMLHttpRequest();
        xhr.onload = function () {
            let pupdata = JSON.parse(xhr.responseText);
            let t = "";
            for (let i = 0; i < pupdata.length; i++) {
                let s=pupdata[i];
                t += '<div class="card" data-year="' + s.year + '">' +
                    '<div class="card-body">' +
                    '<h5 class="card-title">' + s.title + '</h5>' +
                    '<h6 class="card-subtitle text-muted">' + s.authors + '</h6>' +
                    '<p class="card-text">' +
                    '<i>' + s.journal + '</i>' +
                    '<strong> ' + s.year + '</strong>';

                if(s.volume != ""){
                    t += ',<i> '+s.volume+'</i>';
                }

                if(s.pages != ""){
                    t += ', ' + s.pages;
                }

                t += '</p>';

                if(s.image != ""){
                    t += '<div class="text-center mb-3">' +
                        '<img src="' + s.image + '" class="img-fluid img-pub">' +
                        '</div>';
                }

                if(s.abstract != ""){
                    t += '<p class="card-text">' + s.abstract + '</p>';
                }

                t += '<a href="https://doi.org/' + s.doi + '" target="_blank">DOI: ' + s.doi + '</a>' +
                    '</div>' +
                    '</div>';
            }
            document.getElementById('pubs').innerHTML = t;
        };
        xhr.open('GET', 'publications.json', true);
        xhr.send();
